<div class="row">
    <div class="col-lg-12 col-md-12" *ngIf="errorMessage">
        <div class="alert alert-danger">
            <strong>Error!</strong> {{errorMessage}}
        </div>
    </div>
</div>
<div class="col-xs-12">
    <img *ngIf="isLoadingUser" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
</div>
<div class="container" style="margin-top: 10px;"> 
    <div class="col-md-12" *ngIf="userData">  
        <div class="col-md-4">      
            <div class="portlet light profile-sidebar-portlet bordered">
                <div class="profile-userpic">
                    <img src="/assets/images/updated/{{userData.status.christmasStatus}}.jpg" class="img-responsive" alt=""> </div>
                <div class="profile-usertitle">
                    <div class="profile-usertitle-name">{{userData.userInfo.userName}}</div>
                    <div class="profile-usertitle-job"> {{userData.status.christmasStatus | uppercase}}  </div>
                </div>
                <div class="profile-usertitle-info" *ngIf="userData.status.christmasStatus == 'magus'">
                    <h4>You carry the Christmas Spirit in your heart! </h4>
                </div>
                <div >
                    <div class="progress progress_sm" *ngIf="nextStatus && nextStatus != 'magus'">
                        <div class="progress-bar bg-green" role="progressbar"
                            [attr.aria-valuenow]="statusPercentage" aria-valuemin="0" aria-valuemax="100"
                            [style.width]="statusPercentage + '%'">
                        </div>
                    </div>
                    <div *ngIf="nextStatus && nextStatus != 'magus'" class="profile-usertitle-progress">
                        <span>{{statusPercentage}}% to {{nextStatus | uppercase}}</span>
                    </div>
                </div>
                
                <div class="profile-userbuttons" *ngIf="!userData.userInfo.secretSantaForId && isSelfProfile()">
                    <button [disabled]="loadingSanta" type="button" class="btn btn-info  btn-sm"  (click)="generateSecretReceiver()">Make me a Santa Helper!</button>
                    <img *ngIf="loadingSanta" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
                </div>
                <div class="profile-secret-info" *ngIf="userData.userInfo.secretSantaForId && isSelfProfile()">
                    <div style="padding: 0px;">
                        <div class="panel panel-default" [ngClass]="{'panel-open': isSantaPanelOpen}">
                            <div class="panel-heading heading-santa" (click)="toggleSantaPanelOpen($event)">
                                <span>My Secret Info</span>
                                <i *ngIf="isSantaPanelOpen" class="pull-right fa fa-chevron-up"></i>
                                <i *ngIf="!isSantaPanelOpen" class="pull-right fa fa-chevron-down"></i>
                            </div>
                            <div class="panel-collapse" [hidden]="!isSantaPanelOpen">
                                <div class="panel-body">
                                    <div class="col-sm-12">
                                        <div class="col-sm-12">
                                            <span>You are a Secret Santa for </span>
                                            <span><b>{{userData.userInfo.secretSantaFor}}</b></span>
                                        </div>
                                        <div class="col-sm-12">
                                            <span>Check your buddy's
                                                <a [routerLink]="['/profile', userData.userInfo.secretSantaForId]">
                                                    <i class="fa fa-gift"></i> wishlist
                                                </a>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="profile-usermenu">
                    <div class="profile-usertitle-wishlist" *ngIf="userData.wishList.length == 0;" >
                        No wishlist items added
                    </div>
                    <div class="profile-usertitle-wishlist" *ngIf="userData.wishList.length !== 0;" style="color:#337abe; font-weight: bold;">
                        Wishlist
                    </div>
                    <ul class="nav"  *ngFor="let item of userData.wishList;">
                        <li style="word-wrap: break-word">
                            <a>{{item.item}}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-8"> 
            <div class="portlet light bordered">
                <div class="portlet-title tabbable-line" *ngIf="!isSelfProfile()">
                    <div class="caption caption-md">
                        <i class="icon-globe theme-font hide"></i>
                        <span class="caption-subject font-blue-madison bold uppercase cmd-link">Feedback</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <div>
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs" role="tablist" *ngIf="isSelfProfile()">
                            <li [ngClass]="{'active': isFeedbackOpen}">
                                <a (click)="openFeedback()" class="cmd-link">Feedback</a>
                            </li>
                            <li [ngClass]="{'active': !isFeedbackOpen}">
                                <a (click)="openWishlist()" class="cmd-link">Wishlist</a>
                            </li>
                        </ul>
                    
                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane" [ngClass]="{'active': isFeedbackOpen}" id="feedback" *ngIf="isFeedbackOpen">
                                <div class="panel-body long-list-panel" style="padding: 2px !important;">
                                    <feedback-panel [userId]="userId"></feedback-panel>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane" [ngClass]="{'active': !isFeedbackOpen}" id="wishlist" *ngIf="!isFeedbackOpen">
                                <div class="panel-body">
                                    <div class="row" *ngIf="userData.wishList.length == 0;" >
                                        No wishlist items added
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table table-striped wishlist-table">
                                            <tbody>
                                                <tr *ngFor="let item of userData.wishList; let i = index;">
                                                    <td class="col-md-10">
                                                        <div *ngIf="!item.isEdited">{{item.item}}</div>
                                                        <div class="row" *ngIf="item.isEdited">
                                                            <input type="text" [maxlength]="50" style="width:90%; margin-left:10px;" [(ngModel)]="item.item">
                                                        </div>
                                                    </td>
                                                    <td class="col-md-2">
                                                            <a class="cmd-link" *ngIf="canEdit()" (click)="editwishlist(item, i)">
                                                                <i class="fa fa-edit fa-lg"></i>
                                                            </a>
                                                            <a class="cmd-link"
                                                                *ngIf="item.isEdited"
                                                                (click)="savewishlist(item, i)"
                                                                [ngClass]="{'not-active': !item.item || isSavingWishList}">
                                                                <i class="fa fa-check fa-green fa-lg"></i>
                                                            </a>
                                                            <a class="cmd-link"*ngIf="canEdit()" (click)="deletewishlist(item, i)"
                                                            [ngClass]="{'not-active': isSavingWishList}">
                                                                <i class="fa fa-trash fa-red fa-lg"></i>
                                                            </a>
                                                            <a class="cmd-link" *ngIf="item.isEdited" (click)="closewishlistedit(item, i)">
                                                                    <i class="fa fa-close fa-red fa-lg"></i>
                                                            </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                <div class="col-xs-12">
                                        <img *ngIf="isSavingWishList" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
                                </div>
                                <div class="row centerd-link" *ngIf="canAdd()">
                                    <button type="button" class="btn btn-info" (click)="addToWishlist()">Add</button>
                                </div>
                            </div>
                        </div>
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
